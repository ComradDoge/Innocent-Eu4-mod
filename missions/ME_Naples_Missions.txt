naples_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = NAP
	}
	has_country_shield = yes

	nap_curia_controller = {
		icon = mission_european_church
		required_missions = { }
		position = 1
		trigger = {
			diplomatic_reputation = 3
			reverse_has_opinion = {
				who = PAP
				value = 50
			}
		}
		effect = {
			add_papal_influence = 50
			every_country = {
				limit = {
					religion = catholic
				}
				add_opinion = {
					who = ROOT
					modifier = +25
				}
			}
			add_country_modifier = {
				name = nap_dominus_vobiscum
				duration = 5475
			}
		}
	}

	nap_papal_relations = {
		icon = mission_empire
		required_missions = { 
			nap_freedom
			nap_curia_controller
		}
		position = 2
		trigger = {
			is_subject = no
			has_opinion = {
				who = PAP
				value = 100
			}
			reverse_has_opinion = {
				who = PAP
				value = 100
			}
		}
		effect = {
			country_event = { 
				id = ME_Naples_Events.1
			}
		}		
	}

	nap_foothold_levant = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_republic_amalfi 
		}
		position = 3
		trigger = {
			mercantilism = 17
			151 = { #Constantinople
				trade_share = {
					country = NAP
					share = 20
				}
			}
		}
		effect = {
			321 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = nap_italian_chestunt
				duration = 3650
			}
		}
	}

	nap_goods_east = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_foothold_levant
		}
		position = 4
		trigger = {
			321 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			321 = {
				add_province_modifier = {
					name = nap_university_modifier
					duration = 3650
				}
				add_building = shipyard
			}
		}
	}

	nap_berbers_raiding = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_riches_naples
		}
		position = 5
		trigger = {
			num_of_admirals = 1
			#Tunis exist
			if = {
				limit = {
					exists = TUN
				}
				341 = { #Tunis
					trade_share = {
						country = TUN
						share = 15
					}
				}
				num_of_light_ship = TUN
			}
			#Tunis does not exist, but a maghrebi faction has taken its place
			else_if = {
				limit = {
					NOT = {
						exists = TUN
					}
				}
				any_country = {
					limit = {
						owns_or_non_sovereign_subject_of = tunisia_area
						culture = maghrebi
					}
					341 = { #Tunis
						trade_share = {
							country = THIS
							share = 15
						}
					}
					NOT = {
						num_of_light_ship = ROOT
					}
				}
			}
		}
		effect = {
			#Tunis exist
			if = {
				limit = {
					exists = TUN
				}
				tunisia_area = {
					limit = {
						NOT = { 
							owned_by = ROOT 
						}
						NOT = { 
							is_core = ROOT 
						}
					}
					add_permanent_claim = ROOT
				}
				add_casus_belli = {
					type = cb_trade_war
					months = 300
					target = TUN
				}
			}
			#Tunis does not exist, but a maghrebi faction has taken its place
			else_if = {
				limit = {
					NOT = {
						exists = TUN
					}
				}
				any_country = {
					limit = {
						owns_or_non_sovereign_subject_of = tunisia_area
						culture = maghrebi
					}
						add_casus_belli = {
						type = cb_trade_war
						months = 300
						target = THIS
					}
				}
				tunisia_area = {
					limit = {
						owned_by = THIS
						NOT = { 
							owned_by = ROOT 
						}
						NOT = { 
							is_core = ROOT 
						}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}

	nap_land_romagna = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_italian_conquest
		}
		position = 7
		trigger = {
			
		}
		effect = {
			emilia_romagna_area = {
				limit = {
					NOT = { 
						owned_by = ROOT
						owned_by = PAP
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

naples_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = NAP
	}
	has_country_shield = yes

	nap_republic_amalfi = {
		icon = me_mission_venice_city_and_port
		required_missions = { 
			nap_freedom
		}
		position = 2
		trigger = {
			is_subject = no
			2983 = {
				development = 14
				base_production = 6
				OR = {
					has_building = marketplace
					has_estate = estate_burghers
				}
			}
		}
		effect = {
			add_navy_tradition = 10
			add_mercantilism = 5
			2983 = {
				add_building = shipyard
				add_province_modifier = {
					name = nap_restore_republic
					duration = -1
				}
			}
		}
	}

	nap_riches_naples = {
		icon = me_mission_venice_small_ship_in_port
		required_missions = {
			nap_republic_amalfi
		}
		position = 4
		trigger = {
			estate_loyalty = {
				estate = estate_burghers
				loyalty = 65
			}
			101 = { #Genoa
				trade_share = {
					country = NAP
					share = 15
				}
			}
		}
		effect = {
			every_province = {
				limit = {
					owned_by = GEN
					region = italy_region
				}
				add_permanent_claim = ROOT
			}
			any_country = {
				limit = {
					owns_or_non_sovereign_subject_of = 115
				}
				add_casus_belli = {
					type = cb_trade_war
					months = 300
					target = TUR
				}
			}
			121 = {
				add_center_of_trade_level = 1
			}
		}
	}

	nap_land_sultan = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_riches_naples
		}
		position = 5
		trigger = {
			num_of_admirals = 1
			num_of_light_ship = MAM 
			num_of_galley = MAM
			358 = { #Alexandria
				trade_share = {
					country = MAM
					share = 25
				}
			}
		}
		effect = {
			cyrenaica_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			bahari_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			delta_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			add_casus_belli = {
				type = cb_trade_war
				months = 300
				target = MAM
			}
		}
	}

	nap_ruling_trade = {
		icon = me_mission_venice_small_ship_in_port
		required_missions = {
		}
		position = 6
		trigger = {
			101 = { # Genoa
				is_strongest_trade_power = ROOT
			}
			112 = { # Venice
				is_strongest_trade_power = ROOT
			}
			137 = { # Ragusa
				is_strongest_trade_power = ROOT
			}
			151 = { # Constantinople
				is_strongest_trade_power = ROOT
			}
			341 = { # Tunis
				is_strongest_trade_power = ROOT
			}
			358 = { # Alexandria
				is_strongest_trade_power = ROOT
			}
			if = {
				limit = {
					exists = ARA
				}
				navy_size = ARA
			}
			if = {
				limit = {
					exists = CAS
				}
				navy_size = CAS
			}
			if = {
				limit = {
					exists = GEN
				}
				navy_size = GEN
			}
			if = {
				limit = {
					exists = VEN
				}
				navy_size = VEN
			}
			if = {
				limit = {
					exists = MAM
				}
				navy_size = MAM
			}
			if = {
				limit = {
					exists = PRO
				}
				navy_size = TUR
			}
		}
		effect = {
			add_mercantilism = 10
			add_country_modifier = {
				name = nap_controller_trade
				duration = 18250
			}	
		}
	}

	nap_taming_milan = {
		icon = mission_monarch_in_throne_room
		required_missions = { 
			nap_italian_conquest
		}
		provinces_to_highlight = {
		}
		position = 7
		trigger = {
			101 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			OR = {
				AND = {
					has_opinion = {
						who = FRA
						value = 50
					}
					reverse_has_opinion = {
						who = FRA
						value = 50
					}
				}
				is_rival = MLO
			}

		}
		effect = {
			every_province = {
				limit = {
					owned_by = MLO
					region = italy_region
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = nap_end_visconti
				duration = 5475
			}
		}
	}
}

naples_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = NAP
	}
	has_country_shield = yes

	nap_freedom = {
		icon = mission_assemble_an_army
		required_missions = { }
		position = 1
		trigger = {
			army_size_percentage = 1
			num_of_generals = 1
			any_country = {
				has_opinion = {
					who = ROOT
					value = 100
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = nap_struggle_anew
				duration = 3650
			}
		}
	}

	nap_sicily = {
		icon = mission_monarch_in_throne_room
		required_missions = { 
			nap_freedom 
		}
		provinces_to_highlight = {
			area = sicily_area
			NOT = { 
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		position = 2
		trigger = {
			is_subject = no
			sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				NOT = {
					unrest = 3
				}
			}
		}
		effect = {
			sicily_area = {
				add_province_modifier = {
					name = nap_legacy_ruggero
					duration = -1
				}
				add_province_modifier = {
					name = nap_liberated_area
					duration = -1
				}
			}
		}
	}

	nap_venetian_goods = {
		icon = mission_disrupt_portuguese_trade
		required_missions = {
			nap_republic_amalfi
		}
		position = 3
		trigger = {
			112 = { #Venice
				trade_share = {
					country = NAP
					share = 30
				}
			}
			#OR = {
				112 = {
					num_of_owned_provinces_with = {
						value = 5
						owned_by = NAP
						has_port = yes
						}
					}
				#}
				112 = {
					num_of_owned_provinces_with = {
						value = 2
						every_trade_node_member_province = {
							limit = {
								owned_by = NAP
								province_has_center_of_trade_of_level = 1
							}
						}
					}
				}
			#}
			num_of_galley = VEN
		}
		effect = {
			apulia_area ={
				random_province_in_state = {
					center_of_trade = +1
				}
			}
			112 = {
				every_trade_node_member_province = {
					limit = {
						owned_by = VEN
						has_port = yes
						region = italy_region
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			add_country_modifier = {
				name = nap_end_of_doge
				duration = 5475
			}
			add_casus_belli = {
				type = cb_trade_war
				months = 300
				target = VEN
			}
		}
	}

	nap_conquest_antioch = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_crown_greece
		}
		provinces_to_highlight = {
			area = aleppo_area
			NOT = { 
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		position = 4
		trigger = {
			aleppo_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				religion = catholic
			}
			legitimacy = 85
		}
		effect = {
			syria_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			country_event = { 
					id = ME_Naples_Events.3
				}
		}
	}

	nap_ottoman_domain = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_riches_naples
		}
		position = 5
		trigger = {
			num_of_admirals = 2
			navy_size = TUR
			151 = { #Constantinople
				trade_share = {
					country = TUR
					share = 33
				}
			}
		}
		effect = {
			137 = {
				every_trade_node_member_province = {
					limit = {
						owned_by = TUR
						has_port = yes
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			hudavendigar_area = {
				limit = {
					NOT = {
						country_or_non_sovereign_subject_holds = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			add_casus_belli = {
				type = cb_trade_war
				months = 300
				target = TUR
			}
		}
	}

	nap_italian_conquest = {
		icon = mission_monarch_in_throne_room
		required_missions = {

		}
		position = 6
		trigger = {
			is_subject = no
		}
		effect = {
			create_general = {
				tradition = 50
			}
		}
	}

	nap_facing_medici = {
		icon = mission_monarch_in_throne_room
		required_missions = { 
			nap_italian_conquest
		}
		provinces_to_highlight = {
			region = italy_region
			country_or_non_sovereign_subject_holds = LAN
		}
		position = 7
		trigger = {
			OR = {
				AND = {
					calc_true_if = {
						ROOT = {
							army_size = LAN
						}
						amount = 2
					}
					is_rival = LAN
				}
				#every_province = {
				#	limit = {
				#		owned_by = LAN
				#		region = italy_region
				#	}
				#}
			}
		}
		effect = {
			add_casus_belli = {
				type = cb_humiliate
				months = 300
				target = LAN
			}
			every_province = {
				limit = {
					owned_by = LAN
					region = italy_region
				}
				add_permanent_claim = ROOT
			}
			every_country = {
				limit = {
					region = italy_region				
				}
				add_opinion = {
					who = ROOT
					modifier = +25
				}
			}
			add_opinion = {
				who = ROOT
				modifier = -100
			}
			add_opinion = {
				who = LAN
				modifier = -100
			}
		}		
	}
}

naples_missions_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = NAP
	}
	has_country_shield = yes

	nap_conquest_epirus = {
		icon = mission_monarch_in_throne_room
		required_missions = { 
			nap_freedom 
		}
		position = 2
		trigger = {
			is_subject = no
			manpower_percentage = 1
			war_exhaustion = 0
		}
		effect = {
			albania_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			144 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			147 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = nap_military_campaign
				duration = 5475
			}
		}
	}

	nap_crown_greece = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_conquest_epirus
		}
		provinces_to_highlight = {
			OR = {
				area = albania_area
			}
			NOT = { 
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		position = 3
		trigger = {
			albania_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			144 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			147 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			145 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			146 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			148 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			aleppo_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			1773 = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
		}
	}

	nap_doors_christianity = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_crown_greece
		}
		provinces_to_highlight = {
			OR = {
			}
			NOT = { 
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		position = 4
		trigger = {
			144 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			145 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			146 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			147 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			148 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			1773 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			if = {
				limit = {
					NOT = { 
						exists = GRE 
					}
				}
				country_event = { 
					id = ME_Naples_Events.2 
				}
			}
			thrace_area = {
				limit = {
					NOT = { 
						owned_by = ROOT
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			add_country_modifier = {
				name = nap_european_doors
				duration = 3650
			}
		}
	}

	nap_conquest_constantinople = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_doors_christianity 
		}
		provinces_to_highlight = {
			OR = {
				area = thrace_area
			}
			NOT = { 
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		position = 5
		trigger = {
			thrace_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				NOT = {
					unrest = 3
					devastation = 1
				}
			}
		}
		effect = {
			thrace_area = {
			}
		}
	}

	nap_provence = {
		icon = mission_monarch_in_throne_room
		required_missions = {
		}
		provinces_to_highlight = {
		}
		position = 6
		trigger = {
			if = {
				limit = {
					exists = PRO
				}
				diplomatic_reputation = 2
				reverse_has_opinion = {
					who = PRO
					value = 100
				}
				has_opinion = {
					who = PRO
					value = 100
				}
				marriage_with = PRO
			}
			else_if = {
				limit = {
					NOT = {
						exists = PRO
					}
				}
				diplomatic_reputation = 3
			}
		}
		effect = {
			if = {
				limit = {
					exists = PRO
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 300
					target = PRO
				}

			}
			else_if = {
				limit = {
					NOT = {
						exists = PRO
					}
				}
				every_province = {
					limit = {
						is_core = PRO
						region = france_region
					}
				}
				add_permanent_claim = ROOT
			}
			loire_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
			provence_area = {
				limit = {
					NOT = { 
						owned_by = ROOT 
					}
					NOT = { 
						is_core = ROOT 
					}
				}
				add_permanent_claim = ROOT
			}
		}
	}

	nap_subjucate_piedmont = {
		icon = mission_monarch_in_throne_room
		required_missions = {
			nap_italian_conquest
		}
		position = 7
		trigger = {
			
		}
		effect = {
			every_province = {
				limit = {
					owned_by = SAV
					region = italy_region
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

naples_missions_5 = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = NAP
	}
	has_country_shield = yes

	nap_university = {
		icon = mission_assemble_an_army
		required_missions = { }
		position = 1
		trigger = {
			
		}
		effect = {
			add_prestige = 25
			add_country_modifier = {
				name = nap_university_modifier
				duration = -1
			}
			121 = {
				add_building = university
			}
		}
	}

	nap_royal_palace = {
		icon = mission_assemble_an_army
		required_missions = { 
			nap_university
			nap_freedom
		}
		position = 2
		trigger = {
			
		}
		effect = {
			add_country_modifier = {
				name = nap_royal_palace_modifier
				duration = -1
			}
		}
	}

	nap_dev3 = {
		icon = mission_assemble_an_army
		required_missions = { 
			nap_royal_palace
		}
		position = 3
		trigger = {
		}
		effect = {
			add_country_modifier = {
				name = nap_development3
				duration = -1
			}
		}
	}

	nap_dev4 = {
		icon = mission_assemble_an_army
		required_missions = { 
			nap_dev3
		}
		position = 4
		trigger = {
		}
		effect = {
			add_country_modifier = {
				name = nap_development4
				duration = -1
			}
		}
	}

	nap_dev5 = {
		icon = mission_assemble_an_army
		required_missions = { 
			nap_dev4
		}
		position = 5
		trigger = {
		}
		effect = {
			add_country_modifier = {
				name = nap_development5
				duration = -1
			}
		}
	}
	
}

#add_base_tax = 1
#add_base_production = 1
#add_base_manpower = 1
#    nap_kingdom_jerusalem = {
#	icon = mission_monarch_in_throne_room
#		required_missions = {
#		}
#		provinces_to_highlight = {
#			OR = {
#				area = palestine_area
#			}
#			NOT = { 
#				country_or_non_sovereign_subject_holds = ROOT 
#			}
#		}
#		position = 6
#		trigger = {
#			# KOJ is_client_state_of ROOT
#			palestine_area = {
#				type = all
#				country_or_non_sovereign_subject_holds = ROOT
#				religion = catholic
#			}
#		}
#		effect = {
#
#		}
#	}
#  
#	nap_jerusalem_dominus = {
#		icon = mission_monarch_in_throne_room
#		required_missions = {
#		}
#		provinces_to_highlight = {
#			OR = {
#				area = palestine_area
#			}
#			NOT = { 
#				country_or_non_sovereign_subject_holds = ROOT
#			}
#		}
#		position = 6
#		trigger = {
#			palestine_area = {
#				type = all
#				country_or_non_sovereign_subject_holds = ROOT
#				religion = catholic
#			}
#		}
#		effect = {
#
#		}
#	}