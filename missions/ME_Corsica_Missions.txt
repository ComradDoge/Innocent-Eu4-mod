COR_missions_1 = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = COR
		#the flag is not needed in this case (but you put it correctly) because the country does not have vanilla mission
	}
	has_country_shield = yes
	
	corsica_genoese_piracy = {
		icon = mission_assemble_an_army
		required_missions = { 
			corsica_seek_support_from_aboard
			#the other mission is not required (although the lines seemed in that way
		}
		position = 2
		trigger = {
			1298 = { #despite working without any problem, tradenodes id are preferable
				privateer_power = {
					country = ROOT
					share = 15
				}
			}
		}
		effect = {
			add_country_modifier = {
				name = COR_control_over_genoa
				duration = 3650
			}
			add_dip_power = 100
		}
	}
	
	corsica_bolster_the_confederacy = {
		icon = mission_assemble_an_army
		required_missions = {
			corsica_genoese_piracy
			corsica_corsican_infrastructure
		}
		position = 4
		trigger = {
			legitimacy_equivalent = 90
			num_of_galley = 20
		}
		effect = {
			add_country_modifier = {
				name = COR_rule_the_waves
				duration = -1
			}
			capital_scope = { create_or_add_center_of_trade_level = { level = 1 } }
		}
	}
}

COR_missions_2 = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = COR
	}
	has_country_shield = yes
	
	corsica_seek_support_from_aboard = {
		icon = mission_assemble_an_army
		position = 1
		trigger = {
			calc_true_if = {
				all_known_country = {
					is_supporting_independence_of = ROOT
				} 
				amount = 2
			}
		}
		effect = {
			add_country_modifier = {
				name = COR_freedom_for_corsica
				duration = 7300
			}
			add_yearly_manpower = 2
		}
	}
	
	corsica_corsican_infrastructure = {
		icon = mission_assemble_an_army
		required_missions = { corsica_war_for_independence }
		position = 3
		provinces_to_highlight = { is_capital_of = ROOT }
		trigger = {
			#Intended the mission as Corsica as a country instead of the province itself (that you may not own)
			#requested that it can have one building, or its upgraded version
			OR = {
				temple = 1
				cathedral = 1
			}
			OR = {
				marketplace = 1
				trade_depot = 1
				stock_exchange = 1
			}
			OR = {
				dock = 1
				dry_dock = 1
			}
		}
		effect = {
			capital_scope = { create_or_add_center_of_trade_level = { level = 1 } }
			add_years_of_income = 2
		}
	}
	
	corsica_attack_on_majorca = {
		icon = mission_assemble_an_army
		required_missions = { corsica_seize_sardinia }
		position = 5
		provinces_to_highlight = {
			area = baleares_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			baleares_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			catalonia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			valencia_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			baleares_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = COR_forward_ports
					duration = 10950
				}
			}
		}
	}
}

COR_missions_3 = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = COR
	}
	has_country_shield = yes
	
	corsica_war_for_independence = {
		icon = mission_assemble_an_army
		required_missions = { 
			corsica_seek_support_from_aboard 
			corsica_develop_the_island 
		}
		position = 2
		trigger = {
			OR = {
				is_vassal = no
				is_in_war = {
					attacker_leader = ROOT #ROOT not root
					casus_belli = cb_independence_war	
				}
			}
		}
		effect = {
			if = {
				#this is a good way to do it, but you should even ask if it already has a flagship
				#so you can merge everything into one limit
				limit = {
					has_dlc = "Golden Century"
					has_flagship = no
					any_owned_province = {
						has_port = yes
					}
				}
				random_owned_province = {
					limit = {
						has_port = yes
					}
					create_flagship = {    
						name = "Vittoria"
						type = galley
					}
				}
			}
			else = {
				add_country_modifier = {
					name = COR_naval_strategies
					duration = 1825
				}
			}
			random_owned_province = {
				limit = { has_port = yes }
				galley = ROOT
				galley = ROOT
				galley = ROOT
				galley = ROOT
			}
		}
	}
	
	corsica_independent_corsica = {
		icon = mission_assemble_an_army
		required_missions = { corsica_war_for_independence }
		position = 3
		trigger = {
			is_vassal = no
			is_at_war = no
			navy_size_percentage = 0.8
		}
		effect = {
			country_event = { id = ME_Corsica_Events.1 }
			#forgot to add the claims on Sardinia
			corsica_sardinia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { owned_by = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	corsica_seize_sardinia = {
		icon = mission_assemble_an_army
		required_missions = { corsica_independent_corsica }
		position = 4
		provinces_to_highlight = {
			area = corsica_sardinia_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			corsica_sardinia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			baleares_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			sicily_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
			western_sicily_area = {
				limit = {
					NOT = { owned_by = ROOT }
					NOT = { is_core = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
	
	corsica_a_sea_of_pirates = {
		icon = mission_assemble_an_army
		position = 6
		required_missions = {
			corsica_attack_on_majorca
			corsica_capture_of_sicily	
		}
		provinces_to_highlight = {
			OR = {
				trade_company_region = trade_company_safi
				trade_company_region = trade_company_sevilla
				trade_company_region = trade_company_valencia
				trade_company_region = trade_company_genua
				trade_company_region = trade_company_tunis
				trade_company_region = trade_company_venice
				trade_company_region = trade_company_ragusa
				trade_company_region = trade_company_alexandria
				trade_company_region = trade_company_aleppo
				trade_company_region = trade_company_constantinople
				trade_company_region = trade_company_crimea
			}
			has_port = yes
			province_has_center_of_trade_of_level = 1
			NOT = {
				area = southern_morocco_area
				area = alentejo_area
				area = beieras_area
				area = asturias_area
				area = mecca_area
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		trigger = {
			calc_true_if = {
				all_province = {
					OR = {
						trade_company_region = trade_company_safi
						trade_company_region = trade_company_sevilla
						trade_company_region = trade_company_valencia
						trade_company_region = trade_company_genua
						trade_company_region = trade_company_tunis
						trade_company_region = trade_company_venice
						trade_company_region = trade_company_ragusa
						trade_company_region = trade_company_alexandria
						trade_company_region = trade_company_aleppo
						trade_company_region = trade_company_constantinople
						trade_company_region = trade_company_crimea
					}
					has_port = yes
					province_has_center_of_trade_of_level = 1
					NOT = {
						area = southern_morocco_area
						area = alentejo_area
						area = beieras_area
						area = asturias_area
						area = mecca_area
					}
					country_or_non_sovereign_subject_holds = ROOT
				}
				amount = 6
			}
		}
		effect = {
			add_country_modifier = {	
				name = COR_mare_piratae
				duration = 10950
			}
			add_prestige = 25
		}
	}
}

COR_mission_4 = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = COR
	}
	has_country_shield = yes
	
	corsica_develop_the_island = {
		icon = mission_assemble_an_army
		position = 1
		provinces_to_highlight = { is_capital_of = ROOT }
		trigger = {
			capital_scope = { num_of_times_improved = 4 }
		}
		effect = {
			capital_scope = {
				add_province_modifier = {
					name = COR_urban_development
					duration = -1
				}
			}
			#forgot this parrt
			add_yearly_manpower = 2
			add_years_of_income = 2
		}
	}
	
	corsica_promote_the_renaissance = {
		icon = mission_assemble_an_army
		required_missions = { corsica_war_for_independence }
		position = 3
		trigger = { has_institution = renaissance }
		effect = { 
			add_country_modifier = {
				name = COR_school_of_florence
				duration = 5475
			}
		}
	}
	
	corsica_capture_of_sicily = {
		icon = mission_assemble_an_army
		required_missions = { corsica_seize_sardinia }
		position = 5
		provinces_to_highlight = {
			OR = {
				area = sicily_area
				area = western_sicily_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		trigger = {
			sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_sicily_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		effect = {
			add_country_modifier = {
				name = COR_sicily_wrested
				duration = 5475
			}
			add_navy_tradition = 20
		}
	}
}